:original_name: swr_02_0074.html

.. _swr_02_0074:

Querying Accounts an Image Is Shared With
=========================================

Description
-----------

Query accounts an image is shared with.

Constraints
-----------

None

URI
---

GET /v2/manage/namespaces/{namespace}/repositories/{repository}/access-domains

.. table:: **Table 1** Path parameters

   +------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                                                                                                                                                                                                                                                                                                                     |
   +============+===========+========+=================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | namespace  | Yes       | String | Organization name. Enter 1 to 64 characters, starting with a lowercase letter and ending with a lowercase letter or digit. Only lowercase letters, digits, periods (.), underscores (_), and hyphens (-) are allowed. Periods, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed.                                                                              |
   +------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | repository | Yes       | String | Image repository name. Enter 1 to 128 characters. It must start and end with a lowercase letter or digit. Only lowercase letters, digits, periods (.), slashes (/), underscores (_), and hyphens (-) are allowed. Periods, slashes, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed. Replace a slash (/) with a dollar sign ($) before you send the request. |
   +------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                              |
   +=================+=================+=================+==========================================================================================================================================================+
   | Content-Type    | Yes             | String          | Message body type (format). The value can be **application/json** or **charset=utf-8 application/json**.                                                 |
   |                 |                 |                 |                                                                                                                                                          |
   |                 |                 |                 | Default value: **application/json**                                                                                                                      |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | X-Auth-Token    | Yes             | String          | User token.                                                                                                                                              |
   |                 |                 |                 |                                                                                                                                                          |
   |                 |                 |                 | The token can be obtained by calling the IAM API used to obtain a user token. The value of **X-Subject-Token** in the response header is the user token. |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+

.. note::

   By default, 100 records will be returned.

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameter

   +-----------+------------------------------------------------------------------------------------------------------------------------------+-----------------------------+
   | Parameter | Type                                                                                                                         | Description                 |
   +===========+==============================================================================================================================+=============================+
   | [items]   | Array of :ref:`ShowRepoDomainsResponse <swr_02_0074__en-us_topic_0000001185914346_response_showrepodomainsresponse>` objects | The list of shared tenants. |
   +-----------+------------------------------------------------------------------------------------------------------------------------------+-----------------------------+

.. _swr_02_0074__en-us_topic_0000001185914346_response_showrepodomainsresponse:

.. table:: **Table 4** ShowRepoDomainsResponse

   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type    | Description                                                                                                                                                                 |
   +===============+=========+=============================================================================================================================================================================+
   | namespace     | String  | Organization.                                                                                                                                                               |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | repository    | String  | Image repository.                                                                                                                                                           |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | access_domain | String  | Shared tenant name.                                                                                                                                                         |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | permit        | String  | Permissions.                                                                                                                                                                |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | deadline      | String  | Expiration time.                                                                                                                                                            |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description   | String  | Description.                                                                                                                                                                |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | creator_id    | String  | Creator ID.                                                                                                                                                                 |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | creator_name  | String  | Name of the creator.                                                                                                                                                        |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created       | String  | Time when the image was created. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone. |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated       | String  | Time when an image was updated. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone.  |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status        | Boolean | Status. **true**: valid; **false**: expired.                                                                                                                                |
   +---------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

.. code-block:: text

   GET https://{endpoint}/v2/manage/namespaces/{namespace}/repositories/{repository}/access-domains

Example Response
----------------

**Status code: 200**

The list of shared accounts is queried successfully.

.. code-block::

   [ {
     "namespace" : "demo",
     "repository" : "paas",
     "access_domain" : "swr",
     "permit" : "read",
     "deadline" : "2018-10-01T16:00:00.000Z",
     "description" : "description",
     "creator_id" : "fb3f175c1fd146ab8cdae3272be6107b",
     "creator_name" : "user1",
     "created" : "2017-04-08T14:12:23Z",
     "updated" : "2017-04-13T21:01:11Z",
     "status" : false
   } ]

Status Codes
------------

=========== =======================================
Status Code Description
=========== =======================================
200         List of image sharing accounts queried.
400         Request error.
401         Authentication failed.
500         Internal error.
=========== =======================================

Error Codes
-----------

For details, see :ref:`Error Codes <errorcode>`.
