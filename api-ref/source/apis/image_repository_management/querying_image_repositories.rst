:original_name: swr_02_0034.html

.. _swr_02_0034:

Querying Image Repositories
===========================

Description
-----------

Query image repositories.

Constraints
-----------

None

URI
---

GET /v2/manage/repos

.. table:: **Table 1** Query parameters

   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                     |
   +=================+=================+=================+=================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | namespace       | No              | String          | Organization name. Enter 1 to 64 characters, starting with a lowercase letter and ending with a lowercase letter or digit. Only lowercase letters, digits, periods (.), underscores (_), and hyphens (-) are allowed. Periods, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed.                                                                              |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name            | No              | String          | Image repository name. Enter 1 to 128 characters. It must start and end with a lowercase letter or digit. Only lowercase letters, digits, periods (.), slashes (/), underscores (_), and hyphens (-) are allowed. Periods, slashes, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed. Replace a slash (/) with a dollar sign ($) before you send the request. |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | category        | No              | String          | Repository type. The value can be **app_server**, **linux**, **framework_app**, **database**, **lang**, **windows**, **arm**, or **other**.                                                                                                                                                                                                                                                                                     |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | limit           | No              | String          | Number of returned records. Parameters **offset** and **limit** should always be used together. If this parameter is not specified, 100 records are returned by default. The maximum number of records that can be returned is 1,000.                                                                                                                                                                                           |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset          | No              | String          | Start index. The value must be **0** or a positive number. If this parameter is not specified, the start index is **0** by default.                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | Parameters **offset** and **limit** should always be used together.                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_column    | No              | String          | Sorting by column. You can set this parameter to **updated_time** (update time), **name**, **tag_count** (number of tags), **namespace** (organization), or **is_public** (public or private). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                   |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_type      | No              | String          | Sorting order. You can set this parameter to **desc** (descending order) and **asc** (ascending order). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                          |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is_public       | No              | String          | Whether a repository is public or private. **true** indicates public and **false** indicates private.                                                                                                                                                                                                                                                                                                                           |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | filter          | No              | String          | Pass at least one of the following filter parameters:                                                                                                                                                                                                                                                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **namespace**: organization name. It supports fuzzy match.                                                                                                                                                                                                                                                                                                                                                                      |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **name**: image repository name. It supports fuzzy match.                                                                                                                                                                                                                                                                                                                                                                       |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **category**: image repository type. The value can be **app_server**, **linux**, **framework_app**, **database**, **lang**, **windows**, **arm**, or **other**.                                                                                                                                                                                                                                                                 |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **is_public**: whether images in the repository are public or private. **true** indicates public and **false** indicates private.                                                                                                                                                                                                                                                                                               |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **limit**: number of returned records. **offset**: the start index. Parameters **offset** and **limit** should always be used together.                                                                                                                                                                                                                                                                                         |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **order_column**: sorting by column. You can set this parameter to **updated_time** (update time), **name**, **tag_count** (number of tags), **namespace** (organization), or **is_public** (public or private).                                                                                                                                                                                                                |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **order_type**: sorting order. The value can be **desc** (descending order) or **asc** (ascending order). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                        |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                           |
   +=================+=================+=================+=======================================================================================================================================================+
   | Content-Type    | Yes             | String          | Message body type (format). The value can be **application/json** or **charset=utf-8 application/json**.                                              |
   |                 |                 |                 |                                                                                                                                                       |
   |                 |                 |                 | Default value: **application/json**                                                                                                                   |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | X-Auth-Token    | Yes             | String          | User token.                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                       |
   |                 |                 |                 | The token can be obtained through the IAM API used to obtain a user token. The value of **X-Subject-Token** in the response header is the user token. |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response header parameter

   +---------------+--------+------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                                                |
   +===============+========+============================================================================================================+
   | Content-Range | String | *Offset* (Start index) - *Count* (Number of records on the current page)/*Total* (Total number of records) |
   +---------------+--------+------------------------------------------------------------------------------------------------------------+

.. table:: **Table 4** Response body parameter

   +-----------+----------------------------------------------------------------------------------------------------------+--------------------+
   | Parameter | Type                                                                                                     | Description        |
   +===========+==========================================================================================================+====================+
   | [items]   | Array of :ref:`ShowReposResp <swr_02_0034__en-us_topic_0000001186074268_response_showreposresp>` objects | Request succeeded. |
   +-----------+----------------------------------------------------------------------------------------------------------+--------------------+

.. _swr_02_0034__en-us_topic_0000001186074268_response_showreposresp:

.. table:: **Table 5** ShowReposResp

   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type             | Description                                                                                                                                                                    |
   +===============+==================+================================================================================================================================================================================+
   | name          | String           | Repository name.                                                                                                                                                               |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | category      | String           | Repository type. (Each image has multiple labels.)                                                                                                                             |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description   | String           | Repository description.                                                                                                                                                        |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | size          | Long             | Repository size.                                                                                                                                                               |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is_public     | Boolean          | Whether the repository is public. When the value is **true**, it indicates the repository is public. When the value is **false**, it indicates the repository is private.      |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | num_images    | Long             | Number of images in a repository, ranging from 0 to 9,223,372,036,854,775,807.                                                                                                 |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | num_download  | Long             | The number of downloads.                                                                                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at    | String           | Time when a repository was created. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone. |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at    | String           | Time when a repository was updated. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone. |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | logo          | String           | Repository logo address (not in use).                                                                                                                                          |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | url           | String           | URL of the repository logo (not in use).                                                                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | path          | String           | External image pull address, for example, swr.{region}.mycloud.com/namespace/repository.                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | internal_path | String           | Internal image pull address, for example, 10.125.0.198:20202/namespace/repository.                                                                                             |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain_name   | String           | Tenant name.                                                                                                                                                                   |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | namespace     | String           | Tenant organization.                                                                                                                                                           |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags          | Array of strings | Image tag list.                                                                                                                                                                |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status        | Boolean          | Query images shared by others: specifies whether the shared images have expired. Query images shared by yourself: The default value is **false**, which is meaningless.        |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_range   | Long             | Total number of records.                                                                                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

.. code-block:: text

   GET https://{endpoint}/v2/manage/repos

Example Response
----------------

**Status code: 200**

Request succeeded.

.. code-block::

   [ {
     "name" : "nginx",
     "category" : "linux",
     "size" : 200977474,
     "is_public" : false,
     "num_images" : 2,
     "num_download" : 0,
     "created_at" : "2017-01-01T00:00:00Z",
     "updated_at" : "2017-09-11T03:00:02.542841141Z",
     "url" : "",
     "path" : "swr.***.mycloud.com/namespace/repository",
     "internal_path" : "10.125.0.198:20202/namespace/repository",
     "domain_name" : "root",
     "namespace" : "root",
     "tags" : [ "latest", "log" ],
     "status" : false,
     "total_range" : 4
   } ]

Status Codes
------------

=========== ======================
Status Code Description
=========== ======================
200         Request succeeded.
400         Request error.
401         Authentication failed.
500         Internal error.
=========== ======================

Error Codes
-----------

For details, see :ref:`Error Codes <errorcode>`.
