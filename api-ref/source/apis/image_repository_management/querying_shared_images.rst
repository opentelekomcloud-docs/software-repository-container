:original_name: swr_02_0075.html

.. _swr_02_0075:

Querying Shared Images
======================

Description
-----------

Query shared images.

Constraints
-----------

None

URI
---

GET /v2/manage/shared-repositories

.. table:: **Table 1** Query parameters

   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                     |
   +=================+=================+=================+=================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | namespace       | No              | String          | Organization name. Enter 1 to 64 characters, starting with a lowercase letter and ending with a lowercase letter or digit. Only lowercase letters, digits, periods (.), underscores (_), and hyphens (-) are allowed. Periods, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed.                                                                              |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name            | No              | String          | Image repository name. Enter 1 to 128 characters. It must start and end with a lowercase letter or digit. Only lowercase letters, digits, periods (.), slashes (/), underscores (_), and hyphens (-) are allowed. Periods, slashes, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed. Replace a slash (/) with a dollar sign ($) before you send the request. |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | center          | Yes             | String          | The value can only be **self** or **thirdparty**.                                                                                                                                                                                                                                                                                                                                                                               |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **self**: images shared by you. **thirdparty**: images shared with you by others                                                                                                                                                                                                                                                                                                                                                |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain_name     | No              | String          | Owner name.                                                                                                                                                                                                                                                                                                                                                                                                                     |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status          | No              | String          | **false**: The sharing has expired. **true**: The sharing is valid.                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | limit           | No              | String          | Number of returned records. Parameters **offset** and **limit** should always be used together. If this parameter is not specified, 100 records are returned by default. The maximum number of records that can be returned is 1,000.                                                                                                                                                                                           |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset          | No              | String          | Start index. The value must be **0** or a positive number. If this parameter is not specified, all records will be returned by default.                                                                                                                                                                                                                                                                                         |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | Parameters **offset** and **limit** should always be used together.                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_column    | No              | String          | Sorting by column. You can set this parameter to **updated_at** (update time), **name**, **tag_count** (number of tags), **namespace** (organization), or **domain_name** (owner). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                               |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_type      | No              | String          | Sorting order. You can set this parameter to **desc** (descending order) and **asc** (ascending order). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                          |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | filter          | No              | String          | Set this parameter to **center::**\ {*center*}\|\ **name::**\ {*name*}\|\ **limit::**\ {*limit*}\|\ **offset::**\ {*offset*}\|\ **namespace::**\ {*namespace*}\|\ **order_column::**\ {*order_column*}\|\ **order_type::**\ {*order_type*}.                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | Where,                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **center** can be set to **self** (images shared by you) or **thirdparty** (images shared with you by others).                                                                                                                                                                                                                                                                                                                  |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **namespace** indicates the organization name.                                                                                                                                                                                                                                                                                                                                                                                  |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **name** indicates the image repository name.                                                                                                                                                                                                                                                                                                                                                                                   |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **limit** indicates the number of returned records.                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **offset** indicates the start index.                                                                                                                                                                                                                                                                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **order_column** indicates sorting by column. The value can be **updated_at** (update time), **name** (image repository name), **tag_count** (number of tags), **namespace** (organization), and **domain_name** (owner).                                                                                                                                                                                                       |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                 |                 |                 | **order_type** indicates the sorting order. The value can be **desc** (descending order) or **asc** (ascending order).                                                                                                                                                                                                                                                                                                          |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                           |
   +=================+=================+=================+=======================================================================================================================================================+
   | Content-Type    | Yes             | String          | Message body type (format). The value can be **application/json** or **charset=utf-8 application/json**.                                              |
   |                 |                 |                 |                                                                                                                                                       |
   |                 |                 |                 | Default value: **application/json**                                                                                                                   |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | X-Auth-Token    | Yes             | String          | User token.                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                       |
   |                 |                 |                 | The token can be obtained through the IAM API used to obtain a user token. The value of **X-Subject-Token** in the response header is the user token. |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response header parameter

   +---------------+--------+------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                                                |
   +===============+========+============================================================================================================+
   | Content-Range | String | *Offset* (Start index) - *Count* (Number of records on the current page)/*Total* (Total number of records) |
   +---------------+--------+------------------------------------------------------------------------------------------------------------+

.. table:: **Table 4** Response body parameter

   +-----------+----------------------------------------------------------------------------------------------------------+--------------------+
   | Parameter | Type                                                                                                     | Description        |
   +===========+==========================================================================================================+====================+
   | [items]   | Array of :ref:`ShowReposResp <swr_02_0075__en-us_topic_0000001231313909_response_showreposresp>` objects | Request succeeded. |
   +-----------+----------------------------------------------------------------------------------------------------------+--------------------+

.. _swr_02_0075__en-us_topic_0000001231313909_response_showreposresp:

.. table:: **Table 5** ShowReposResp

   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type             | Description                                                                                                                                                                    |
   +===============+==================+================================================================================================================================================================================+
   | name          | String           | Repository name.                                                                                                                                                               |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | category      | String           | Repository type. (Each image has multiple labels.)                                                                                                                             |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description   | String           | Repository description.                                                                                                                                                        |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | size          | Long             | Repository size.                                                                                                                                                               |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is_public     | Boolean          | Whether the repository is public. When the value is **true**, it indicates the repository is public. When the value is **false**, it indicates the repository is private.      |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | num_images    | Long             | Number of images in a repository, ranging from 0 to 9,223,372,036,854,775,807.                                                                                                 |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | num_download  | Long             | The number of downloads.                                                                                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at    | String           | Time when a repository was created. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone. |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at    | String           | Time when a repository was updated. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone. |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | logo          | String           | Repository logo address (not in use).                                                                                                                                          |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | url           | String           | URL of the repository logo (not in use).                                                                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | path          | String           | External image pull address, for example, swr.{region}.mycloud.com/namespace/repository.                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | internal_path | String           | Internal image pull address, for example, 10.125.0.198:20202/namespace/repository.                                                                                             |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain_name   | String           | Tenant name.                                                                                                                                                                   |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | namespace     | String           | Tenant organization.                                                                                                                                                           |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags          | Array of strings | Image tag list.                                                                                                                                                                |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status        | Boolean          | Query images shared by others: specifies whether the shared images have expired. Query images shared by yourself: The default value is **false**, which is meaningless.        |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_range   | Long             | Total number of records.                                                                                                                                                       |
   +---------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

.. code-block:: text

   GET https://{endpoint}/v2/manage/shared-repositories

Example Response
----------------

**Status code: 200**

Request succeeded.

.. code-block::

   [ {
     "name" : "demo",
     "category" : "other",
     "description" : "",
     "size" : 115645792,
     "is_public" : false,
     "num_images" : 1,
     "num_download" : 0,
     "created_at" : "2018-03-21T12:22:37Z",
     "updated_at" : "2018-03-21T12:22:37Z",
     "logo" : "",
     "url" : "",
     "path" : "swr.***.mycloud.com/namespace/demo",
     "internal_path" : "100.125.0.198:20202/namespace/demo",
     "domain_name" : "domain_name",
     "namespace" : "namespace",
     "tags" : [ "latest" ],
     "status" : true
   } ]

Status Codes
------------

=========== ======================
Status Code Description
=========== ======================
200         Request succeeded.
400         Request error.
401         Authentication failed.
500         Internal error.
=========== ======================

Error Codes
-----------

For details, see :ref:`Error Codes <errorcode>`.
