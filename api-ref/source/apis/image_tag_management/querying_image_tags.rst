:original_name: swr_02_0035.html

.. _swr_02_0035:

Querying Image Tags
===================

Description
-----------

Query image tags.

Constraints
-----------

None

URI
---

GET /v2/manage/namespaces/{namespace}/repos/{repository}/tags

.. table:: **Table 1** Path parameters

   +------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                                                                                                                                                                                                                                                                                                                     |
   +============+===========+========+=================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | namespace  | Yes       | String | Organization name. Enter 1 to 64 characters, starting with a lowercase letter and ending with a lowercase letter or digit. Only lowercase letters, digits, periods (.), underscores (_), and hyphens (-) are allowed. Periods, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed.                                                                              |
   +------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | repository | Yes       | String | Image repository name. Enter 1 to 128 characters. It must start and end with a lowercase letter or digit. Only lowercase letters, digits, periods (.), slashes (/), underscores (_), and hyphens (-) are allowed. Periods, slashes, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed. Replace a slash (/) with a dollar sign ($) before you send the request. |
   +------------+-----------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** Query parameters

   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   +=================+=================+=================+==================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | limit           | No              | String          | Number of returned records. Parameters **offset** and **limit** should always be used together. If this parameter is not specified, 100 records are returned by default. The maximum number of records that can be returned is 1,000.                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset          | No              | String          | Start index. The value must be **0** or a positive number. If this parameter is not specified, all records will be returned by default.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                 |                 |                 | Parameters **offset** and **limit** should always be used together.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_column    | No              | String          | Sorting by column. You can set this parameter to **updated_at** (sorting by update time) or **tag** (sorting by tag). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_type      | No              | String          | Sorting order. You can set this parameter to **desc** (descending order) and **asc** (ascending order). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tag             | No              | String          | Image tag name.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | filter          | No              | String          | Set this parameter to **offset**::{*offset*}\|\ **limit**::{*limit*}\|\ **order_column**::{*order_column*}\|\ **order_type**::{*order_type*}\|\ **tag**::{*tag*}. **limit** indicates the number of returned records. **offset** indicates the start index. Parameters **offset** and **limit** should always be used together. **order_column** indicates sorting by column. The value can be **updated_at** (sorting by update time) or **tag** (sorting by tag). **order_type** indicates the sorting order. The value can be **desc** (descending order) or **asc** (ascending order). **tag** indicates the image tag name. |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                           |
   +=================+=================+=================+=======================================================================================================================================================+
   | Content-Type    | Yes             | String          | Message body type (format). The value can be **application/json** or **charset=utf-8 application/json**.                                              |
   |                 |                 |                 |                                                                                                                                                       |
   |                 |                 |                 | Default value: **application/json**                                                                                                                   |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | X-Auth-Token    | Yes             | String          | User token.                                                                                                                                           |
   |                 |                 |                 |                                                                                                                                                       |
   |                 |                 |                 | The token can be obtained through the IAM API used to obtain a user token. The value of **X-Subject-Token** in the response header is the user token. |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response header parameter

   +---------------+--------+------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type   | Description                                                                                                |
   +===============+========+============================================================================================================+
   | Content-Range | String | *Offset* (Start index) - *Count* (Number of records on the current page)/*Total* (Total number of records) |
   +---------------+--------+------------------------------------------------------------------------------------------------------------+

.. table:: **Table 5** Response body parameter

   +-----------+----------------------------------------------------------------------------------------------------------------+-----------------+
   | Parameter | Type                                                                                                           | Description     |
   +===========+================================================================================================================+=================+
   | [items]   | Array of :ref:`ShowReposTagResp <swr_02_0035__en-us_topic_0000001230995415_response_showrepostagresp>` objects | Image tag list. |
   +-----------+----------------------------------------------------------------------------------------------------------------+-----------------+

.. _swr_02_0035__en-us_topic_0000001230995415_response_showrepostagresp:

.. table:: **Table 6** ShowReposTagResp

   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                 |
   +=======================+=======================+=============================================================================================================================================================================+
   | id                    | Long                  | Tag ID.                                                                                                                                                                     |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | repo_id               | Long                  | Repository ID.                                                                                                                                                              |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Tag                   | String                | Image tag name.                                                                                                                                                             |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | image_id              | String                | Image ID.                                                                                                                                                                   |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | manifest              | String                | Image manifest.                                                                                                                                                             |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | digest                | String                | Hash value of an image.                                                                                                                                                     |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | schema                | Long                  | Docker protocol version. The version can be **1** or **2**.                                                                                                                 |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | path                  | String                | External image pull address, for example, swr.{region}.mycloud.com/namespace/repository:tag.                                                                                |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | internal_path         | String                | Internal image pull address, for example, 10.125.0.198:20202/namespace/repository:tag.                                                                                      |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | size                  | Long                  | Image size, ranging from 0 to 9,223,372,036,854,775,807.                                                                                                                    |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is_trusted            | Boolean               | By default, the value is **false**.                                                                                                                                         |
   |                       |                       |                                                                                                                                                                             |
   |                       |                       | Default value: **false**                                                                                                                                                    |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created               | String                | Time when the image was created. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone. |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated               | String                | Time when an image was updated. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone.  |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | deleted               | String                | Time when an image is deleted. It is the UTC standard time. Users need to calculate the offset based on the local time, for example, UTC+8:00 for the East 8th Time Zone.   |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain_id             | String                | Account ID.                                                                                                                                                                 |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | scanned               | Boolean               | Whether the image has been scanned.                                                                                                                                         |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tag_type              | Long                  | **0**: manifest; **1**: manifest list.                                                                                                                                      |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

.. code-block:: text

   GET https://{endpoint}/v2/manage/namespaces/{namespace}/repos/{repository}/tags

Example Response
----------------

**Status code: 200**

The list of image tags is queried successfully.

.. code-block::

   [ {
     "id" : 0,
     "repo_id" : 0,
     "Tag" : "latest",
     "image_id" : "741f24a795d6d93d7c6edd11780d63c13e16c39615dd9d223378a57a836f2ee6",
     "manifest" : "{\"schemaVersion\":2,\"mediaType\":\"application/vnd.docker.distribution.manifest.v2+json\",\"config\":{\"mediaType\":\"application/vnd.docker.container.image.v1+json\",\"size\":1862,\"digest\":\"sha256:741f24a795d6d93d7c6edd11780d63c13e16c39615dd9d223378a57a836f2ee6\"},\"layers\":[{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar.gzip\",\"size\":1292800,\"digest\":\"sha256:8ac8bfaff55af948c796026ee867448c5b5b5d9dd3549f4006d9759b25d4a893\"},{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar.gzip\",\"size\":10240,\"digest\":\"sha256:77ddbf3a9fe11e81761a0f9df43a28e3e6f29bbb53c0c8cf71cd7efa69729aed\"}]}",
     "digest" : "sha256:57b605845a6367c34bfb6ea6477f16852f59aa1861a2b51d10ab77ae0a1dc9c3",
     "schema" : 2,
     "path" : "swr.***.mycloud.com/namespace/busybox:latest",
     "internal_path" : "10.125.0.198:20202/namespace/busybox:latest",
     "size" : 1304902,
     "is_trusted" : false,
     "created" : "2018-07-06T06:18:55Z",
     "updated" : "2018-07-06T06:18:55Z",
     "deleted" : null,
     "domain_id" : "050*****************6d70a960",
     "scanned" : false,
     "tag_type" : 0
   } ]

Status Codes
------------

=========== ===================================
Status Code Description
=========== ===================================
200         Image tag list queried.
400         Request error.
401         Authentication failed.
404         The image repository was not found.
500         Internal error.
=========== ===================================

Error Codes
-----------

For details, see :ref:`Error Codes <errorcode>`.
