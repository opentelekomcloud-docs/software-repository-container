:original_name: swr_02_0074.html

.. _swr_02_0074:

Obtaining the List of Accounts Used for Image Sharing
=====================================================

Function
--------

Obtain the list of accounts used for image sharing.

URI
---

GET /v2/manage/namespaces/{*namespace*}/repositories/{*repository*}/access-domains

For details about parameters, see :ref:`Table 1 <swr_02_0074__table11843162810214>`.

.. _swr_02_0074__table11843162810214:

.. table:: **Table 1** Parameter description

   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                                                                                                                                                                                                                                                                  |
   +============+===========+========+==============================================================================================================================================================================================================================================================================================================================================================================+
   | namespace  | Yes       | String | Organization name. An organization name contains 1 to 64 characters. It must start with a lowercase letter and end with a lowercase letter or digit. Only lowercase letters, digits, periods (.), underscores (_), and hyphens (-) are allowed. Periods, underscores, and hyphens cannot be placed next to each other. A maximum of two consecutive underscores are allowed. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | repository | Yes       | String | Image repository name                                                                                                                                                                                                                                                                                                                                                        |
   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

-  Request parameters

   .. table:: **Table 2** Request header parameters

      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
      | Parameter       | Mandatory       | Type            | Description                                                                                                                 |
      +=================+=================+=================+=============================================================================================================================+
      | Content-Type    | Yes             | String          | Message body type (format). The value can be **application/json** or **charset=utf-8 application/json**.                    |
      |                 |                 |                 |                                                                                                                             |
      |                 |                 |                 | The default value is **application/json**.                                                                                  |
      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
      | X-Auth-Token    | Yes             | String          | User token.                                                                                                                 |
      |                 |                 |                 |                                                                                                                             |
      |                 |                 |                 | The token can be obtained by calling an IAM API. The value of **X-Subject-Token** in the response header is the user token. |
      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+

-  Example request

   .. code-block:: text

      GET https://{Endpoint}/v2/manage/namespaces/group/repositories/busybox/access-domains

.. note::

   By default, 100 records will be returned.

Response
--------

-  Response parameters

   .. table:: **Table 3** Response body parameter description

      +-------------------+------------------------------------------------------------+------------------+
      | Parameter         | Type                                                       | Description      |
      +===================+============================================================+==================+
      | *[Array element]* | Array of :ref:`objects <swr_02_0074__table45446245174724>` | Shared accounts. |
      +-------------------+------------------------------------------------------------+------------------+

   .. _swr_02_0074__table45446245174724:

   .. table:: **Table 4** *[Array element]* parameter description

      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter     | Type    | Description                                                                                                                                                              |
      +===============+=========+==========================================================================================================================================================================+
      | namespace     | String  | Organization name.                                                                                                                                                       |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | repository    | String  | Image repository name.                                                                                                                                                   |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | access_domain | String  | Name of the account used for image sharing.                                                                                                                              |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | permit        | String  | Permission.                                                                                                                                                              |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | deadline      | String  | Expiration time.                                                                                                                                                         |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | description   | String  | Description.                                                                                                                                                             |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | creator_id    | String  | Creator ID.                                                                                                                                                              |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | creator_name  | String  | Name of the creator.                                                                                                                                                     |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | created       | String  | Time when an image was created. It is the UTC standard time. You need to calculate the offset based on the local time. For example, GMT+8 is 8 hours ahead the GMT time. |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | updated       | String  | Time when an image was updated. It is the UTC standard time. You need to calculate the offset based on the local time. For example, GMT+8 is 8 hours ahead the GMT time. |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | status        | Boolean | Status. **true**: valid; **false**: expired                                                                                                                              |
      +---------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example response

   .. code-block::

      [
          {
              "namespace": "group",
              "repository": "busybox",
              "access_domain": "swr",
              "permit": "read",
              "deadline": "2021-10-01T16:00:00Z",
              "description": "description",
              "creator_id": "fb3f175c1fd146ab8cdae3272be6107b",
              "creator_name": "group",
              "created": "2021-06-10T08:14:42.56632Z",
              "updated": "2021-06-10T08:14:42.566325Z",
              "status": true
          }
      ]

Status Code
-----------

=========== ============================================================
Status Code Description
=========== ============================================================
200         The list of image sharing accounts is returned successfully.
400         Request error. Error information is returned.
401         Authentication failed.
500         Internal error. Error information is returned.
=========== ============================================================

Error Codes
-----------

For details, see :ref:`Error Codes <swr_02_0024>`.
