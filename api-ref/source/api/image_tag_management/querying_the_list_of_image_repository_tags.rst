:original_name: swr_02_0035.html

.. _swr_02_0035:

Querying the List of Image Repository Tags
==========================================

Function
--------

Query all image tags of an image repository.

URI
---

GET /v2/manage/namespaces/{namespace}/repos/{repository}/tags?offset={offset}&limit={limit}&order_column={order_column}&order_type={order_type}&tag={tag}

For details about parameters, see :ref:`Table 1 <swr_02_0035__table11843162810214>`.

.. _swr_02_0035__table11843162810214:

.. table:: **Table 1** Parameter description

   ========== ========= ====== ======================
   Parameter  Mandatory Type   Description
   ========== ========= ====== ======================
   namespace  Yes       String Organization name
   repository Yes       String Image repository name.
   ========== ========= ====== ======================

.. table:: **Table 2** Query parameters

   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +=================+=================+=================+=============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | limit           | No              | String          | Number of returned records. Parameters **offset** and **limit** should always be used together. If this parameter is not specified, all records will be returned by default.                                                                                                                                                                                                                                                                                                                                                                                                                |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset          | No              | String          | Start index. The value can be **0** or a positive integer multiple of the **limit** value. If this parameter is not specified, all records will be returned by default.                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 | Parameters **offset** and **limit** should always be used together.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_column    | No              | String          | Sorting by column. You can set this parameter to **updated_at** (sorting by update time). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | order_type      | No              | String          | Sorting type. You can set this parameter to **desc** (descending sort) or **asc** (ascending sort). Parameters **order_column** and **order_type** should always be used together.                                                                                                                                                                                                                                                                                                                                                                                                          |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tag             | No              | String          | Image tag name.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | filter          | No              | String          | Set this parameter to **offset**::{*offset*}\|\ **limit**::{*limit*}\|\ **order_column**::{*order_column*}\|\ **order_type**::{*order_type*}\|\ **tag**::{*tag*}. **limit** indicates the number of returned records. **offset** indicates the start index. Parameters **offset** and **limit** should always be used together. **order_column** indicates sorting by column, which can be **updated_at** (sorting by update time). **order_type** indicates the sorting type, which can be **desc** (descending order) or **asc** (ascending order). **tag** indicates the image tag name. |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

-  Request parameters

   .. table:: **Table 3** Request header parameters

      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
      | Parameter       | Mandatory       | Type            | Description                                                                                                                 |
      +=================+=================+=================+=============================================================================================================================+
      | Content-Type    | Yes             | String          | Message body type (format). The value can be **application/json** or **charset=utf-8 application/json**.                    |
      |                 |                 |                 |                                                                                                                             |
      |                 |                 |                 | The default value is **application/json**.                                                                                  |
      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+
      | X-Auth-Token    | Yes             | String          | User token.                                                                                                                 |
      |                 |                 |                 |                                                                                                                             |
      |                 |                 |                 | The token can be obtained by calling an IAM API. The value of **X-Subject-Token** in the response header is the user token. |
      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------+

-  Example request

   .. code-block:: text

      GET https://{Endpoint}/v2/manage/namespaces/group/repos/busybox/tags

Response
--------

-  Response parameters

   Status code: 200

   .. table:: **Table 4** Response header parameters

      +---------------+--------+------------------------------------------------------------------------------------------------------------+
      | Parameter     | Type   | Description                                                                                                |
      +===============+========+============================================================================================================+
      | Content-Range | String | *Offset* (Start index) - *Count* (Number of records on the current page)/*Total* (Total number of records) |
      +---------------+--------+------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 5** Response body parameters

      +-----------+--------------------------------------------------------+-------------+
      | Parameter | Type                                                   | Description |
      +===========+========================================================+=============+
      | [*Array*] | Array of :ref:`ShowReposTagResp <swr_02_0035>` objects | Image tags. |
      +-----------+--------------------------------------------------------+-------------+

   .. table:: **Table 6** *[Array element]* parameters description

      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Type                  | Description                                                                                                                                                       |
      +=======================+=======================+===================================================================================================================================================================+
      | id                    | Integer               | ID                                                                                                                                                                |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | repo_id               | Integer               | Repository ID.                                                                                                                                                    |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Tag                   | String                | Image tag name.                                                                                                                                                   |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | image_id              | String                | Image ID.                                                                                                                                                         |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | manifest              | String                | Image manifest.                                                                                                                                                   |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | digest                | String                | SHA value of an image.                                                                                                                                            |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | schema                | Integer               | Docker protocol version. The version can be **1** or **2**.                                                                                                       |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | path                  | String                | External image pull address. The format is {*Repository address*}/{*Namespace name*}/{*Repository name*}:{*Tag name*}.                                            |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | internal_path         | String                | Internal image pull address. The format is {*Repository address*}/{*Namespace name*}/{*Repository name*}:{*Tag name*}.                                            |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | size                  | Integer               | Image size.                                                                                                                                                       |
      |                       |                       |                                                                                                                                                                   |
      |                       |                       | Value range: 0 to 9223372036854775807                                                                                                                             |
      |                       |                       |                                                                                                                                                                   |
      |                       |                       | Unit: byte                                                                                                                                                        |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | is_trusted            | Boolean               | By default, the value is **false**.                                                                                                                               |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | created               | String                | Time when an image is created. It is the UTC standard time. You need to calculate the offset based on the local time. For example, GMT+8 is 8 hours ahead of GMT. |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | updated               | String                | Time when an image is updated. It is the UTC standard time. You need to calculate the offset based on the local time. For example, GMT+8 is 8 hours ahead of GMT. |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | deleted               | String                | Time when an image was deleted.                                                                                                                                   |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | domain_id             | String                | Account ID.                                                                                                                                                       |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | tag_type              | Integer               | 0: manifest. 1: manifest list.                                                                                                                                    |
      +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example response

   .. code-block::

      [
          {
              "id": 0,
              "repo_id": 0,
              "Tag": "latest",
              "image_id": "741f24a795d6d93d7c6edd11780d63c13e16c39615dd9d223378a57a836f2ee6",
              "manifest": "{\"schemaVersion\":2,\"mediaType\":\"application/vnd.docker.distribution.manifest.v2+json\",\"config\":{\"mediaType\":\"application/vnd.docker.container.image.v1+json\",\"size\":1862,\"digest\":\"sha256:741f24a795d6d93d7c6edd11780d63c13e16c39615dd9d223378a57a836f2ee6\"},\"layers\":[{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar.gzip\",\"size\":1292800,\"digest\":\"sha256:8ac8bfaff55af948c796026ee867448c5b5b5d9dd3549f4006d9759b25d4a893\"},{\"mediaType\":\"application/vnd.docker.image.rootfs.diff.tar.gzip\",\"size\":10240,\"digest\":\"sha256:77ddbf3a9fe11e81761a0f9df43a28e3e6f29bbb53c0c8cf71cd7efa69729aed\"}]}",
              "digest": "sha256:57b605845a6367c34bfb6ea6477f16852f59aa1861a2b51d10ab77ae0a1dc9c3",
              "schema": 2,
              "path": "{Repository address}/group/busybox:latest",
              "internal_path": "10.125.0.198:20202/namespace/busybox:latest",
              "size": 1304902,
              "is_trusted": false,
              "created": "2018-07-06T06:18:55Z",
              "updated": "2018-07-06T06:18:55Z",
              "deleted": null,
              "domain_id": "0503dda878000fed0f75c0096d70a960",
              "tag_type": 0
          }
      ]

Status Code
-----------

=========== ==========================================================
Status Code Description
=========== ==========================================================
200         All tags in the image repository are successfully queried.
400         Request error. Error information is returned.
401         Authentication failed.
404         The repository does not exist.
500         Internal error. Error information is returned.
=========== ==========================================================

Error Codes
-----------

For details, see :ref:`Error Codes <swr_02_0024>`.
